# if 文

前に _ヒーリング_ の魔法で HP を回復させる _コード_ を書きました。

```swift
var hp = 41
print("HP \(hp)")
hp += 80
print("HP \(hp)")
```

しかし、勇者の最大 HP を 153 として、あまりダメージを受けてないときに回復するとどうなるでしょうか。

```swift
let maxHP = 153 // 最大 HP
var hp = 132 // 現在 HP
print("HP \(hp)")
hp += 80
print("HP \(hp)")
```

```
HP 132
HP 212
```

なんと `hp` が `maxHP` を超えてしまいました😱

これを防ぐには、回復させた結果 `hp` が `maxHP` を超えた場合には `hp` を `maxHP` にするという処理が必要です。そのような _コード_ は次のように書けます。

```swift
if hp > maxHP {
  hp = maxHP
}
```

`if` は英語で「もし」という意味です。この _コード_ の `{ }` の中は `hp > maxHP` が正しい場合にだけ実行されます。 `hp > maxHP` は数学と同じで、「 `hp` が `maxHP` より大きい」という意味になります。つまり、「もし、 `hp` が `maxHP` より大きかったら `{ }` の中を実行する」という意味になります。

この `if` から `{ }` の終わりまでを **_if 文_** と言います。 _if 文_ の書き方は次の通りです。

```swift
if 条件式 {
  条件が正しい場合にだけ実行される処理
}
```

`{ }` の中が一段下がっているのも気になると思います。このような字下げを行うことを **_インデント_** と言います。 `{ }` の中には複数行の _コード_ を書くことができるので、 `{ }` の中が長くなってくるとどこからどこまでが `{ }` の中に書かれているのかぱっと見でわかりづらくなります。 _インデント_ を行うことで、どこが `{ }` の中なのかひと目でわかるようになります。

[IBM Swift Sandbox](https://swift.sandbox.bluemix.net/) を使っている場合、 `{` を書いて改行すると自動的に _インデント_ されます。自分で _インデント_ したい場合には tab キーを押すことで _インデント_ できます。

完成した _コード_ は↓です。

```swift
let maxHP = 153 // 最大 HP
var hp = 132 // 現在 HP

print("HP \(hp)")

hp += 80 // ヒーリングで HP を回復
if hp > maxHP {
  // hp が maxHP より大きい場合だけ実行される
  hp = maxHP
}

print("HP \(hp)")
```

```
HP 132
HP 153
```

`>` 以外にも色んな条件を書くことができます。

| 条件式 | 意味 |
|:---|:---|
| `a < b` | `a` が `b` より小さい |
| `a > b` | `a` が `b` より大きい |
| `a <= b` | `a` が `b` と等しいか小さい、数学の ≦ |
| `a >= b` | `a` が `b` と等しいか大きい、数学の ≧ |
| `a == b` | `a` と `b` が等しい |
| `a != b` | `a` と `b` が等しくない、数学の ≠ |

`a` と `b` が等しいことを表す式が `a = b` ではなく `a == b` なのは、 `=` は _代入_ のために使われるからです。

_if 文_ のように、特定の条件を満たした場合だけ実行されるような仕組みを **_条件分岐_** と言います。これまでは上から順に命令が実行されるだけでしたが、 _条件分岐_ が書けるようになると一気に _プログラム_ らしくなります。

## 練習問題

### 問 1

_魔法の指輪_ で魔法使いの MP を 20 回復しました。魔法使いの最大 MP は 58 です。魔法使いの最大 MP を `maxMP` 、現在 MP を `mp` で表すとき、回復前と回復後の MP を次のように表示するプログラムを作成して下さい。ただし、 <code class="sq-output">XX</code> の部分には適切な値が入るものとします。

現在 MP には 0 から 58 までの値を設定し、どのような値を設定しても適切に動作するようにして下さい。

```
MP XX
MP XX
```

### 問 2

_リザレクション_ の魔法は死んでしまった仲間の HP を最大 HP まで回復させて生き返らせることができますが、 HP が 0 と等しいときしか効きません。今、僧侶が勇者に _リザれション_ の魔法を使ったとします。勇者の最大 HP を _定数_ `maxHP` 、現在 HP を _変数_ `hp` で表すとき、次の _コード_ の続きを書いて、 _リザレクション_ 実行後の勇者の現在 HP を表示する _プログラム_ を作成して下さい。

```swift
let maxHP = 153
var hp = 0 // 他の値でも良い

print("HP \(hp)")
```

## 答え

### 問 1

```swift
let maxMP = 58
var mp = 45

print("MP \(mp)")

mp += 20 // 魔法の指輪で MP を回復
if mp > maxMP {
  mp = maxMP
}

print("MP \(mp)")
```

### 問 2

```swift
let maxHP = 153
var hp = 0 // 他の値でも良い

print("HP \(hp)")

if hp == 0 {
  hp = maxHP
}

print("HP \(hp)")
```
