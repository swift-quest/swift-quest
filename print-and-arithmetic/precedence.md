# 計算の優先順位

今度はもう少し RPG っぽい計算をしてみましょう。勇者の攻撃力と魔王の防御力を決めて、攻撃したときのダメージを計算してみることにします。

前回は `+`, `-`, `*`, `/` を使って計算することを学びました。これだけなら普通の電卓でもできますが、実は電卓と違い三つ以上の数を計算することもできます。

```swift
print(1 + 2 + 3)
```

```
6
```

ちゃんと計算されましたね！繰り返しになりますが、必ず自分でもプログラムを書いて実行し、試しながら読み進めて下さい。もしかしたら、自分で色々試した人の中にはすでに三つの数の計算を試していた人もいるかもしれません。

次は、たし算とかけ算を混ぜてみましょう。どうなるでしょうか？

```swift
print(1 + 2 * 3)
```

```
7
```

算数や数学と同じように `2 * 3` が先に計算されました。もし `1 + 2` が先に計算されていたら、 1 + 2 = 3 、 3 * 3 = 9 で答えは 9 になるはずです。このように、 `*` や `/` は `+` や `-` より先に計算されるようになっています。算数や数学と同じように計算してくれるのは便利ですね！

では、 `1 + 2 * 3` の `1 + 2` を先に計算するにはどうすればいいでしょうか？算数や数学では先に計算したい部分に ( ) を付けます。プログラミングでも同じです。

`1 + 2` に `()` を付けて `(1 + 2) * 3` にしてみましょう。

```swift
print((1 + 2) * 3)
```

```
9
```

今度は `1 + 2` が先に計算されて計算結果が  <code class="sq-output">9</code>  になりました。

数学では、中カッコ { } や大カッコ [ ] を使って、複雑な計算順序を表すことがあります。たとえば、 {(1 + 2) × 3 + 4} × 5 だと、内側の ( ) の中の 1 + 2 = 3 が最初に計算されます。次に、 { } の中の 3 × 3 + 4 = 13 が計算されます。最後に、 { } の外側の 13 × 5 = 65 が計算されます。

プログラミングでも同じようなことができますが、カッコを重ねるときは内側のカッコも外側のカッコもすべて `()` で書きます。　{(1 + 2) × 3 × 4} * 5 を計算するプログラムは次のようになります。

```swift
print(((1 + 2) * 3 + 4) * 5)
```

```
65
```

では、これを使って勇者が魔王を攻撃したときのダメージを計算してみましょう。

ダメージを計算するにはダメージの計算方法を考えなければなりません。攻撃力が高いほど敵に大きなダメージを与えることができ、防御力が高いほど相手の攻撃で受けるダメージは小さくなります。単純に考えると、攻撃力から防御力を引けばそのような計算ができます。しかし、それではあまりにもそのまますぎておもしろくありません。

ここでは、攻撃力から防御力を引いて、それを 2 で割った値をダメージとすることにしましょう。たとえば、攻撃力が 10 で防御力が 4 の場合は、 10 - 4 = 6, 6 ÷ 2 = 3 で、敵に 3 のダメージを与えられることになります。 10 - 4 を先に計算するので、一つの式で書くと　( ) を使って (10 - 4) ÷ 2 です。これをプログラムにすると次のようになります。

```swift
print((10 - 4) / 2)
```

```
3
```

勇者と魔王はこんなに弱くないので、もっと大きな数字で計算してみましょう。勇者の攻撃力が 162 、魔王の防御力が 58 だとします。このとき、ダメージを計算するプログラムは次のようになります。

```swift
print((162 - 58) / 2)
```

```
52
```

「ゆうしゃのこうげき。まおうに 52 のダメージ！」というわけです。

これも色々変更して遊んでみましょう。ゲームを改造できるなら、攻撃力をめちゃくちゃ高くしてみたいですよね！試しに勇者の攻撃力を 1500 にしてみましょう。

```swift
print((1500 - 58) / 2)
```

```
721
```

「ゆうしゃのこうげき。まおうに 721 のダメージ！」

SWIFT QUEST では魔王の HP は 999 なので、なんと一撃でほとんど HP がなくなってしまいました。残りの HP も計算してみましょう。

```swift
print(999 - 721)
```

```
278
```

もう一回攻撃すれば魔王を倒せそうです。ただの計算をしているだけですが、 RPG の戦闘だと思うと楽しいですね！

ちなみに、この残り HP を求める計算は、次のように一つの式にして計算することもできます。

```swift
print(999 - (1500 - 58) / 2)
```

このような複雑な計算も式を書くだけで思いのままです。

これまで、プログラミングを学び始めて合計で 10 分ほどしか経ってないと思います。しかし、電卓よりもはるかに強力な計算手段を手にすることができました。算数や数学のように、 ( ) を含む式もそのまま計算させることができます。そして、難しくて複雑な式でも、コンピューターが一瞬で答えを計算してくれます。その計算を使って RPG の戦闘を表現することもできました。

ほんの 10 分で学んだにしては、すごすぎると思いませんか？もちろん、プログラミングの力はこんなものではありません。これから、さらなる強力なプログラミングの手法を学んでいきましょう。

## 練習問題

### 問 1

魔王の攻撃力は 185 、勇者の防御力は 97 です。攻撃力から防御力を引いてから 2 で割った値をダメージとするとき、魔王の攻撃で勇者が受けるダメージを計算して下さい。ただし、計算はコンピューターにさせて下さい。

### 問 2

勇者の HP は 153 です。問 1 と同じ方法でダメージを計算するとき、魔王の攻撃を受けた後の勇者の HP を表示して下さい。ただし、計算はコンピューターにさせて下さい。

## 答え

### 問 1

```swift
print((185 - 97) / 2)
```

### 問 2

```swift
print(153 - (185 - 97) / 2)
```
