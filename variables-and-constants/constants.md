# 定数

_変数_ と似たものに **_定数_** があります。 _変数_ は後から別の値を _代入_ して変更することができますが、 _定数_ は _初期値_ を与えるだけで後から変更することができません。

_変数_ よりできることが少ないのに何の役に立つのかと思うかもしれませんが、たとえば戦闘中の最大 HP のように、変更されてしまって困るものは _定数_ にしてしまった方が間違えて変更されてしまうことが防げて安心です。

_定数_ は `var` の代わりに `let` を使うことで _宣言_ することができます。最大 HP を表す _定数_ `maxHP` を作るには次のように書きます。

```swift
let maxHP = 153
```

`maxHP` の `HP` が小文字ではなく大文字になっているのは、本来は max HP という二つの単語だからです。しかし、 _Swift_ の _変数_ や _定数_ にはスペースを含む名前を付けることができません。とはいえ、 `maxhp` のようにくっつけてしまうとどこが区切りかわからずに読みづらくなってしまいます。

そのため、 _Swift_ では複数単語からなる _変数名_ を付ける場合には、 2 単語目以降の頭文字を大文字にするのが一般的です。たとえば、 swift quest なら `swiftQuest` と、 swift quest book なら `swiftQuestBook` とします。これを、 **_キャメルケース_** と言います。キャメルというのはラクダのことで、大文字にした部分がラクダのコブのように見えるからです。もし、 _キャメルケース_ を使わずに `swiftquestbook` のように書くととても読みづらいですよね。

では、なぜ `maxHP` は `maxHp` ではないのでしょうか？ HP は一つの単語として使われますが、元々は hit point の略語です。英語では hit point の頭文字をとって HP 、 uniform resource locator の頭文字をとって URL というように、各単語の頭文字から略語を作ることがあり、そのような場合にはすべて大文字で書くのが一般的です。 _Swift_ では、そのような略語を _変数名_ に使う場合には、最初の単語の場合は `hp` のようにすべて小文字にし、 2 単語目以降の場合は `maxHP` のようにすべて大文字で表すことが多いです。 SWIFT QUEST では、それにならって `maxHP` としています。

さて、 _定数_ は _変数_ と違って後から値を変更することができません。もし変更しようとすると _コンパイルエラー_ になってしまい、プログラムを実行することができません。

```swift
let maxHP = 153
maxHP = 0
```

```
ERROR at line 2, col 7: cannot assign to value: 'maxHP' is a 'let' constant
maxHP = 0
~~~~~ ^
NOTE at line 1, col 1: change 'let' to 'var' to make it mutable
let maxHP = 153
^~~
var
```

エラーメッセージを読んでみると、はじめに "ERROR at line 2, col 7" と書いてあります。これは、「 2 行目の 7 文字目でエラーが起こったよ」ということです。

その後の "cannot assign to value: 'maxHP' is a 'let' constant" は「 `maxHP` は `let` で _宣言_ された _定数_ なので _代入_ することができません」という意味です。

その次の 2 行は、 _コード_ のどこに問題があるのかを示しています。 `^` の示す `=` に問題があり、波線 `~~~~~` が引かれた `maxHP` に _代入_ することができないということです。

```
maxHP = 0
~~~~~ ^
```

さらに、親切なことに次の行ではどうすればいいかを教えてくれています。 "NOTE at line 1, col 1: change 'let' to 'var' to make it mutable" は、 「1 行目の 1 文字目で、`let` を `var` に変えれば変更可能になるよ」ということです。

次の↓はこの `^` で示した `let` を `var` に変えると良いということですね。

```
let maxHP = 153
^~~
var
```

このように、エラーメッセージが読めると何が悪かったのか、どのように修正すればいいのかのヒントが得られて便利です。エラーメッセージは英語で難しそうに見えるかもしれませんが、最近は機会翻訳も優れています。英語がわからなければ [Google 翻訳](https://translate.google.co.jp/?hl=ja) などのサービスで翻訳してみましょう。たとえば、 "cannot assign to value: 'maxHP' is a 'let' constant" は次のように翻訳されます。

```
cannot assign to value: 'maxHP' is a 'let' constant
↓
値に代入することはできません： 'maxHP'は 'let'定数です
```

これでも大体の意味はわかりますね。もう一つ試してみましょう。

```
change 'let' to 'var' to make it mutable
↓
変更可能にするには 'var'に 'let'を変更してください
```

いかがでしょうか。難しそうなエラーメッセージが表示されたからといって焦る必要はありません。英語が読めなければ機械翻訳でもいいので翻訳して読んでみましょう。そうするだけで、自分で問題に気づいてすぐに解決できる場合も多いはずです。

それでも自分で解決できず誰かに質問するときには、必ずエラーメッセージの全文を[コピーアンドペースト（コピペ）](https://www.google.co.jp/search?q=%E3%82%B3%E3%83%94%E3%83%BC%E3%82%A2%E3%83%B3%E3%83%89%E3%83%9A%E3%83%BC%E3%82%B9%E3%83%88&tbm=vid)して伝えるようにしましょう。あなたには役に立たない情報に見えても、相談相手には有用な情報であるということも多いです。

ただし、エラーメッセージに従って修正するのが必ずしも正しいとは限りません。今は最大 HP の値を変更したいわけではないので、エラーメッセージ通りに `let` を `var` に直すとおかしな _コード_ になってしまいます。最大 HP を変更しようとしたこと自体が間違いだったのです。 `hp` と間違えて `maxHP` を変更しようとしてしまったのなら、 `maxHP` の _宣言_ を `let` から `var` に変更するのではなく、 `maxHP = 0` を `hp = 0` に直すのが正しい対応です。エラーが発生したときにどのように対処するのが正しいかは、必ず自分で考えて判断しなければなりません。

このように、 _定数_ を使えば誤って変更してしまった場合に簡単に気付くことができます。もし `let` の代わりに `var` を使っていたら、 _プログラム_ を実行しておかしな挙動をしているのを見て初めて _コード_ の間違いに気付くことになります。このような _コード_ の間違いを **_バグ_** と言います。 `let` を使っていれば _プログラム_ を実行する前に _コード_ を _コンパイル_ する時に間違いに気付くことができます。 `var` に優先して `let` を使い、後で値を変更しないといけないときだけ `var` を使うようにしましょう。それが、 _バグ_ の少ない _プログラム_ を作るための第一歩となります。

これまでは _変数_ や _定数_ に数値しか _代入_ してきませんでしたが、 _文字列_ を _代入_ することもできます。 `"ゆうしゃ"` や `"まおう"` のような _文字列_ は変更されるものではないので、 _定数_ にすると良いでしょう。

```swift
let name = "ゆうしゃ"
var hp = 153
print(name)
print("HP \(hp)")
```

```
ゆうしゃ
HP 153
```

## 練習問題

### 問 1

勇者の最大 MP は 25 です。最大 MP を表す _定数_ `maxMP` を _宣言_ し、それを次のように表示する _プログラム_ を作成して下さい。

```
MP 25
```

### 問 2

問 1 に加え、勇者の現在 MP を表す _変数_ `mp` を _宣言_ し、次のように表示する _プログラム_ を作成して下さい。ただし、 <code class="sq-output">/</code> の左が現在 MP 、右が最大 MP です。

```
MP 25 / 25
```

### 問 3

魔法使いの名前を表す _定数_ `name` と HP を表す _変数_ `hp` を作成し、次のように表示する _プログラム_ を作成して下さい。

```
まほうつかい
HP 77
```

### 問 4

勇者の最大 HP は 153 です。勇者は敵の攻撃を受け死んでしまいました（ = HP が 0 ）。そこで、僧侶が _リザレクション_ の魔法で勇者を生き返られ、 HP を完全回復させました。勇者の最大 HP を _定数_ `maxHP` 、現在 HP を _変数_ `hp` で表すとき、次の _コード_ の続きを書いて、復活後の勇者の HP を表示する _プログラム_ を作成して下さい。

```swift
let maxHP = 153
var hp = 0
print("HP \(hp)")
```

## 答え

### 問 1

```swift
let maxMP = 25
print("MP \(maxMP)")
```

### 問 2

```swift
let maxMP = 25
var mp = maxMP
print("MP \(mp) / \(maxMP)")
```

どうして `var mp = 25` とするのではなく、 `var mp = maxMP` としているのでしょうか。

ゲームバランスを調整するために後から勇者の MP が変更になるかもしれません。もし勇者の MP が 30 に変更になっても、 `var mp = maxMP` と書いていれば、 `let maxMP = 30` と一箇所修正するだけで済みます。しかし、 `var mp = 25` としていまっていたら、こちらも `var mp = 30` と修正しなければなりません。

今は 2 箇所だけなので大した問題に思わないかもしれませんが、大きな _プログラム_ では修正しないといけない箇所が 100 箇所になってしまうかもしれません。しかし、もしプログラムのどこかで `let maxMP = 25` を書き、後はすべて `25` ではなく `maxMP` を使って書いていれば、たとえ 100 箇所で `maxMP` を使っていたとしても修正が必要なのは `let maxMP = 25` の 1 箇所だけで済みます。

このように、 _コード_ を書くときには後で重複して修正が必要にならないようによく考えることが大切です。

### 問 3

```swift
let name = "まほうつかい"
var hp = 77
print(name)
print("HP \(hp)")
```

### 問 4

```swift
let maxHP = 153
var hp = 0
print("HP \(hp)")
hp = maxHP
print("HP \(hp)")
```
