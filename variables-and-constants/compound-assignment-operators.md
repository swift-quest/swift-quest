# 復号代入演算子

ダメージを受けたときに HP を減らす処理はどのように書けば良いでしょうか？

勇者の HP が 153 だとして、まずは _変数_ `hp` を _宣言_ します。

```swift
var hp = 153
print("HP \(hp)")
```

勇者が 5 のダメージを受けたとすると、ダメージを受けた後の HP は `hp - 5` で表せます。これを新しい HP として `hp` に _代入_ すれば HP を 5 減らすことができます。つまり、`hp = hp - 5` となります。

```swift
var hp = 153
print("HP \(hp)")
hp = hp - 5
print("HP \(hp)")
```

```
HP 153
HP 148
```

数学では `=` の左右は等しくないといけないので `hp = hp - 5` という式は変だと思うかもしれません。しかし、 _Swift_ （に限らず多くの _プログラミング言語_ ）の `=` は、 `=` の右側の値を左側に _代入_ するという意味になるのでこれは正しい式です。 `hp ← hp - 5` のように考えればよかったことを思い出して下さい。

_変数_ の値を減らしたり増やしたりすることはとても多いのでもっと簡単な書き方が用意されていて、 `hp = hp - 5` は `hp -= 5` と書くことができます。 `-=` と同じように、`+=` や `*=`, `-=` などもあります。

| 簡単な書き方 | 意味 |
|:---|:---|
| `変数名 += 値` | `変数名 = 変数名 + 値` |
| `変数名 -= 値` | `変数名 = 変数名 - 値` |
| `変数名 *= 値` | `変数名 = 変数名 * 値` |
| `変数名 /= 値` | `変数名 = 変数名 / 値` |

この `+=` や `-=` などを、ちょっと難しい名前ですが **_複合代入演算子_** と言います。

_複合代入演算子_ を使って先程のプログラムを書き直すと次のようになります。

```swift
var hp = 153
print("HP \(hp)")
hp -= 5
print("HP \(hp)")
```

さて、魔王の攻撃力は 185 、勇者の防御力は 97 、ダメージは攻撃力から防御力を引いて 2 で割って計算できました。魔王が勇者を攻撃したときにダメージが減る計算をしてみましょう。ダメージは `(185 - 97) / 2` で計算できるので、これを `hp -=` の右側において `hp -= (185 - 97) / 2` とすれば OK です。

```swift
var hp = 153
print("HP \(hp)")
hp -= (185 - 97) / 2
print("HP \(hp)")
```

```
HP 153
HP 109
```

## 練習問題

### 問 1

魔法使いの MP は 58 です。その後 _テンペスト_ の魔法を使って MP を 12 消費しました。魔法使いの MP を表す _変数_ `mp` を _宣言_ して、 _テンペスト_ を使う前と後の MP を次のように表示する _プログラム_ を作成して下さい。ただし、 _複合代入演算子_ は使わないで下さい。

```
MP 58
MP 46
```

### 問 2

問 1 のプログラムを、 _複合代入演算子_ を使って書き直して下さい。

### 問 3

勇者はダメージを受けて HP が 41 になってしまいました。その後、 _ヒーリング_ の魔法を使って HP を 80 回復しました。次の _コード_ の続きを書いて、同じように回復後の HP を表示する _プログラム_ を作成して下さい。

```swift
var hp = 41
print("HP \(hp)")
```

### 問 4

次の _コード_ は魔法使いの HP を表示します。

```swift
var hp = 77
print("HP \(hp)")
```

魔王の攻撃力は 185 、魔法使いの防御力は 57 、攻撃力から防御力を引いてから 2 で割った値をダメージとするとき、 _コード_ の続きを書いて、魔王に攻撃された後の魔法使いの HP を表示する _プログラム_ を作成して下さい。

## 答え

### 問 1

```swift
var mp = 58
print("MP \(mp)")
mp = mp - 12
print("MP \(mp)")
```

### 問 2

```swift
var mp = 58
print("MP \(mp)")
mp -= 12
print("MP \(mp)")
```

### 問 3

```swift
var hp = 41
print("HP \(hp)")
hp += 80
print("HP \(hp)")
```

### 問 4

```swift
var hp = 77
print("HP \(hp)")
hp -= (185 - 57) / 2
print("HP \(hp)")
```
